<?xml version="1.0" encoding="ISO-8859-1"?>
<project default="default"
    xmlns:j="jelly:core"
    xmlns:ant="jelly:ant">

    <goal name="default">
        <attainGoal name="build"/>
    </goal>    
    
    <goal name="build">     
        <attainGoal name="jar:install"/>
    </goal>
    
    <preGoal name="java:jar-resources">        
        <attainGoal name="copyjars"/>
    </preGoal>

    <goal name="rebuild">
        <attainGoal name="clean"/>
        <attainGoal name="build"/>
    </goal>
        
    <preGoal name="clean:clean">        
        <ant:delete dir="${basedir}/lib"/>    
    </preGoal>
    
    <postGoal name="eclipse:generate-classpath">
      <replaceregexp file=".classpath" match='(classpathentry) (kind="var")' replace='\1 exported="true" \2' byline="true"/>
    </postGoal>
    
    <goal name="copyjars">        
        <j:forEach var="artifact" items="${pom.artifacts}">  
          <ant:copy todir="${basedir}/lib" file="${artifact.path}"/>          
        </j:forEach>                 
    </goal>  
     
</project>