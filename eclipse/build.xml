<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one or more
  ~ contributor license agreements.  See the NOTICE file distributed with
  ~ this work for additional information regarding copyright ownership.
  ~ The ASF licenses this file to You under the Apache License, Version 2.0
  ~ (the "License"); you may not use this file except in compliance with
  ~ the License.  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!-- ================================================================================= -->
<!-- Download Europa Eclipse artifacts and unzip them into the user's local maven repo -->
<!-- ================================================================================= -->
<project name="EuropaArtifacts">

    <target name="init">
        <property name="europa.download.url"    value="http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/20070702/"/>
        <property name="dtp.download.url"       value="http://www.eclipse.org/downloads/download.php?file=/datatools/downloads/1.5/"/>
        <property name="emf.download.url"       value="http://www.eclipse.org/downloads/download.php?file=/modeling/emf/emf/downloads/drops/2.3.0/R200706262000/"/>
        <property name="gef.download.url"       value="http://www.eclipse.org/downloads/download.php?file=/tools/gef/downloads/drops/R-3.3-200706281000/"/>
        <property name="wtp.download.url"       value="http://www.eclipse.org/downloads/download.php?file=/webtools/downloads/drops/R2.0/R-2.0-200706260303/"/>
        <property name="europa.jee.win32"       value="eclipse-jee-europa-win32.zip"/>
        <property name="europa.jee.linux"       value="eclipse-jee-europa-linux-gtk.tar"/>
        <property name="europa.jee.linux.gz"    value="eclipse-jee-europa-linux-gtk.tar.gz"/>
        <property name="europa.jee.macos"       value="eclipse-jee-europa-macosx-carbon.tar"/>
        <property name="europa.jee.macos.gz"    value="eclipse-jee-europa-macosx-carbon.tar.gz"/>
        <property name="dtp-sdk" value="dtp-sdk_1.5.zip"/>
        <property name="emf-sdo" value="emf-sdo-xsd-SDK-2.3.0.zip"/>
        <property name="gef-sdk" value="GEF-SDK-3.3.zip"/>
        <property name="wtp-sdk" value="wtp-sdk-R-2.0-200706260303.zip"/>
    </target>

    <target name="win32" depends="init,common" description="Download Windows-specific artifact(s)">
        <echo>Downloading ${europa.download.url}${europa.jee.win32}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${europa.download.url}${europa.jee.win32}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.win32}" usetimestamp="true"/>
        <echo>Unzipping ${europa.jee.win32} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <unzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.win32}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="linux" depends="init,common" description="Download Linux-specific artifact(s)">
        <echo>Downloading ${europa.download.url}${europa.jee.linux.gz}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${europa.download.url}${europa.jee.linux.gz}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.linux.gz}" usetimestamp="true"/>
        <echo>Unzipping ${europa.jee.linux.gz} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <gunzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.linux.gz}"/>
        <untar  src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.linux}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="macos" depends="init,common" description="Download Mac-specific artifact(s)">
        <echo>Downloading ${europa.download.url}${europa.jee.macos.gz}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${europa.download.url}${europa.jee.macos.gz}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.macos.gz}" usetimestamp="true"/>
        <echo>Unzipping ${europa.jee.macos.gz} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <gunzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.macos.gz}"/>
        <untar  src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${europa.jee.macos}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="common" description="Download artifacts common to all OS'es">
        <antcall target="dtp"/>
        <antcall target="emf"/>
        <antcall target="gef"/>
        <antcall target="wtp"/>
    </target>

    <target name="dtp" description="Download Data Tools Platform (DTP) artifact">
        <echo>Downloading ${dtp.download.url}${dtp-sdk}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${dtp.download.url}${dtp-sdk}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${dtp-sdk}" usetimestamp="true"/>
        <echo>Unzipping ${dtp-sdk} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <unzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${dtp-sdk}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="emf" description="Download Eclipse Modeling Framework (EMF) artifact">
        <echo>Downloading ${emf.download.url}${emf-sdo}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${emf.download.url}${emf-sdo}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${emf-sdo}" usetimestamp="true"/>
        <echo>Unzipping ${emf-sdo} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <unzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${emf-sdo}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="gef" description="Download Graphical Editing Framework (GEF) artifact">
        <echo>Downloading ${gef.download.url}${gef-sdk}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${gef.download.url}${gef-sdk}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${gef-sdk}" usetimestamp="true"/>
        <echo>Unzipping ${gef-sdk} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <unzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${gef-sdk}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

    <target name="wtp" description="Download Web Tools Platform (WTP) artifact">
        <echo>Downloading ${wtp.download.url}${wtp-sdk}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3"/>
        <get src="${wtp.download.url}${wtp-sdk}&amp;r=1&amp;protocol=http" dest="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${wtp-sdk}" usetimestamp="true"/>
        <echo>Unzipping ${wtp-sdk} to the expected location in ${LOCAL_M2_REPO}</echo>
        <mkdir dir="${LOCAL_M2_REPO}/eclipse"/>
        <unzip src="${LOCAL_M2_REPO}/org/eclipse/eclipse/3.3/${wtp-sdk}" dest="${LOCAL_M2_REPO}/eclipse"/>
    </target>

</project>
